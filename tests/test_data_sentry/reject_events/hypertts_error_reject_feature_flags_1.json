{"event_id":"b50082f854914cd1b33aa21716f602e1","project":6170140,"release":"anki-hyper-tts@0.91","dist":null,"platform":"python","message":"","datetime":"2025-01-24T17:10:20+00:00","tags":[["anki_version","24.11"],["environment","production"],["handled","no"],["level","error"],["mechanism","threading"],["runtime","CPython 3.9.18"],["runtime.name","CPython"],["release","anki-hyper-tts@0.91"],["user","id:uuid:b459074237e7"],["server_name","GCSOM-GDZLMN3"]],"_metrics":{"bytes.ingested.event":11692,"bytes.stored.event":13603},"breadcrumbs":{"values":[{"timestamp":1737738020.48858,"type":"log","category":"111623432.servicemanager","level":"info","message":"discovered 23 services"},{"timestamp":1737738020.48909,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_amazon"},{"timestamp":1737738020.532772,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_azure"},{"timestamp":1737738020.53379,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_cambridge"},{"timestamp":1737738020.53379,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_cereproc"},{"timestamp":1737738020.53379,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_collins"},{"timestamp":1737738020.53522,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_duden"},{"timestamp":1737738020.53522,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_dwds"},{"timestamp":1737738020.53649,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_elevenlabs"},{"timestamp":1737738020.53649,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_elevenlabscustom"},{"timestamp":1737738020.540538,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_espeakng"},{"timestamp":1737738020.541891,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_forvo"},{"timestamp":1737738020.54335,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_fptai"},{"timestamp":1737738020.545256,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_google"},{"timestamp":1737738020.546412,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_googletranslate"},{"timestamp":1737738020.557479,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_lexico"},{"timestamp":1737738020.558984,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_naver"},{"timestamp":1737738020.560023,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_naverpapago"},{"timestamp":1737738020.560023,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_oxford"},{"timestamp":1737738020.561029,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_spanishdict"},{"timestamp":1737738020.561029,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_vocalware"},{"timestamp":1737738020.562034,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_voicen"},{"timestamp":1737738020.562034,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_watson"},{"timestamp":1737738020.563044,"type":"log","category":"111623432.servicemanager","level":"info","message":"importing module service_windows"},{"timestamp":1737738020.607029,"type":"log","category":"comtypes.client._code_cache","level":"info","message":"Imported existing <module 'comtypes.gen' from 'C:\\\\Users\\\\ftawiah\\\\AppData\\\\Roaming\\\\Anki2\\\\addons21\\\\111623432\\\\external\\\\comtypes\\\\gen\\\\__init__.py'>","data":{"asctime":"2025-01-24 12:00:20,607"}},{"timestamp":1737738020.607029,"type":"log","category":"comtypes.client._code_cache","level":"info","message":"Using writeable comtypes cache directory: 'C:\\Users\\ftawiah\\AppData\\Roaming\\Anki2\\addons21\\111623432\\external\\comtypes\\gen'","data":{"asctime":"2025-01-24 12:00:20,607"}},{"timestamp":1737738020.646248,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Amazon"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Azure"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Cambridge"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service CereProc"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Collins"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Duden"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service DigitalesWorterbuchDeutschenSprache"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service ElevenLabs"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service ElevenLabsCustom"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service ESpeakNg"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Forvo"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service FptAi"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Google"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service GoogleTranslate"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Lexico"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Naver"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service NaverPapago"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Oxford"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service SpanishDict"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service VocalWare"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Voicen"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Watson"},{"timestamp":1737738020.647245,"type":"log","category":"111623432.servicemanager","level":"info","message":"instantiating service Windows"},{"timestamp":1737738020.648748,"type":"log","category":"111623432.ttsplayer","level":"info","message":"created AnkiHyperTTSPlayer"}]},"contexts":{"cloudlanguagetools":{"type":"cloudlanguagetools","user_id":null},"runtime":{"runtime":"CPython 3.9.18","name":"CPython","version":"3.9.18","build":"3.9.18 (main, Jan  8 2024, 06:22:44) [MSC v.1929 64 bit (AMD64)]","type":"runtime"}},"culprit":"threading in run","environment":"production","exception":{"values":[{"type":"AttributeError","value":"'NoneType' object has no attribute 'feature_flags'","stacktrace":{"frames":[{"function":"run","module":"threading","filename":"threading","abs_path":"C:\\Users\\ftawiah\\AppData\\Local\\Programs\\Anki\\threading","lineno":917,"in_app":true,"vars":{"self":"<Thread(Thread-2, started daemon 18984)>"}},{"function":"_periodic_flush","module":"1322529746.settings","filename":"1322529746\\settings.py","abs_path":"C:\\Users\\ftawiah\\AppData\\Roaming\\Anki2\\addons21\\1322529746\\settings.py","lineno":795,"pre_context":["    def _periodic_flush(self) -> None:","        while True:","            time.sleep(self.send_interval)","            with self.lock:","                if time.time() - self.last_send_time >= self.send_interval:"],"context_line":"                    self.flush(in_background=True)","post_context":["","    def _send_logs_to_datadog(self, records: List[logging.LogRecord]) -> None:","        body = [","            {","                \"ddsource\": \"anki_addon\","],"in_app":false,"vars":{"self":"<DatadogLogHandler (INFO)>"},"data":{"orig_in_app":-1}},{"function":"flush","module":"1322529746.settings","filename":"1322529746\\settings.py","abs_path":"C:\\Users\\ftawiah\\AppData\\Roaming\\Anki2\\addons21\\1322529746\\settings.py","lineno":769,"pre_context":["","    def flush(self, in_background=False) -> None:","        # flush is also called when the logging module shuts down when Anki is closing.","        # in_background=False is used to not create a new thread when the add-on is closing,","        # as this leads to an error in the shutdown, because at this point no new threads can be created."],"context_line":"        feature_flags = config.get_feature_flags()","post_context":["","        if not feature_flags.get(\"send_addon_logs_to_datadog\", False):","            with self.lock:","                # Clear the buffer to prevent it from growing indefinitely.","                self.buffer = []"],"in_app":false,"vars":{"in_background":"True","self":"<DatadogLogHandler (INFO)>"},"data":{"orig_in_app":-1}},{"function":"get_feature_flags","module":"1322529746.settings","filename":"1322529746\\settings.py","abs_path":"C:\\Users\\ftawiah\\AppData\\Roaming\\Anki2\\addons21\\1322529746\\settings.py","lineno":313,"pre_context":["    def set_feature_flags(self, feature_flags: Optional[dict]):","        self._private_config.feature_flags = feature_flags","        self._update_private_config()","","    def get_feature_flags(self) -> Optional[dict]:"],"context_line":"        return self._private_config.feature_flags","post_context":["","    def add_deck(","        self,","        name: str,","        ankihub_did: uuid.UUID,"],"in_app":false,"vars":{"self":"<1322529746.settings._Config object at 0x000001F11B0F7B20>"},"data":{"orig_in_app":-1}}]},"mechanism":{"type":"threading","handled":false}}]},"extra":{"sys.argv":["C:\\Users\\ftawiah\\AppData\\Local\\Programs\\Anki\\anki.exe"]},"fingerprint":["{{ default }}"],"grouping_config":{"enhancements":"KLUv_SAYwQAAkwKRs25ld3N0eWxlOjIwMjMtMDEtMTGQ","id":"newstyle:2023-01-11"},"hashes":["192c7c6ee877a157a7a92d2763ddcc52","a3b368675b402153d1e350f8b2168ec9"],"ingest_path":[{"version":"25.1.0","public_key":"XE7QiyuNlja9PZ7I9qJlwQotzecWrUIN91BAO7Q5R38"}],"key_id":"2011620","level":"error","location":"threading","logger":"","metadata":{"filename":"threading","function":"run","in_app_frame_mix":"mixed","type":"AttributeError","value":"'NoneType' object has no attribute 'feature_flags'"},"modules":{"certifi":"2019.9.11","packaging":"19.2","pyaes":"1.6.1","pyparsing":"2.4.2","python-dotenv":"0.10.3","qtawesome":"1.1.1","qtpy":"2.1.0","sentry-sdk":"1.6.0","six":"1.12.0","structlog":"24.1.0","tenacity":"8.2.2","urllib3":"1.26.9"},"nodestore_insert":1737738621.673796,"received":1737738620.304617,"sdk":{"name":"sentry.python","version":"1.25.0","integrations":["argv","atexit","boto3","dedupe","excepthook","logging","modules","redis","stdlib","threading"],"packages":[{"name":"pypi:sentry-sdk","version":"1.25.0"}]},"timestamp":1737738620.220811,"title":"AttributeError: 'NoneType' object has no attribute 'feature_flags'","transaction_info":{},"type":"error","user":{"id":"uuid:b459074237e7","sentry_user":"id:uuid:b459074237e7"},"version":"7"}